<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>STM32介绍和工程环境配置</title>
      <link href="/2024/12/17/stm32-jie-shao-he-gong-cheng-huan-jing-pei-zhi/"/>
      <url>/2024/12/17/stm32-jie-shao-he-gong-cheng-huan-jing-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="STM32入门教程（江协）"><a href="#STM32入门教程（江协）" class="headerlink" title="STM32入门教程（江协）"></a>STM32入门教程（江协）</h1><h2 id="1-1-课程简介"><a href="#1-1-课程简介" class="headerlink" title="1-1 课程简介"></a>1-1 课程简介</h2><p>硬件平台：STM32最小系统板+面包板硬件平台</p><p>软件设备：Keil5 MDK(给ARM系列的单片机编程的)</p><h2 id="1-2-STM32简介"><a href="#1-2-STM32简介" class="headerlink" title="1-2 STM32简介"></a>1-2 STM32简介</h2><ol><li><p>STM32简介</p><ul><li>STM32是ST公司基于ARM Cortex-M内核开发的32位微控制器</li><li>STM32常应用在嵌入式领域，如智能车、无人机、机器人、无线通信、物联网、工业控制、娱乐电子产品等</li><li>STM32功能强大、性能优异、片上资源丰富、功耗低，是一款经典的嵌入式微控制器</li></ul><p><img src="https://www.st.com.cn/content/dam/category-pages/stm32-32-bit-arm-cortex-mcus/arm_cortex_mcu_portfolio_new.jpg"></p></li><li><p>ARM</p><ul><li>ARM既指ARM公司，也指ARM处理器内核</li><li>ARM公司是全球领先的半导体知识产权（IP）提供商，全世界超过95%的智能手机和平板电脑都采用ARM架构</li><li>ARM公司设计ARM内核，半导体厂商完善内核周边电路并生产芯片</li></ul><p><img src="https://pic.imgdb.cn/item/67612b42d0e0a243d4e52734.png"></p></li><li><p>STM32F103C8T6</p><ul><li>系列：主流系列STM32F1</li><li>内核：ARM Cortex-M3</li><li>主频：72MHz</li><li>RAM：20K(SRAM)</li><li>ROM: 64K(Flash)</li><li>供电：2.0~3.6V（标准3.3V)</li><li>封装：LQFP48</li></ul></li><li><p>片上资源&#x2F;外设</p><table><thead><tr><th align="center">英文缩写</th><th align="center">名称</th><th align="center">英文缩写</th><th align="center">名称</th></tr></thead><tbody><tr><td align="center"><strong>NVIC</strong></td><td align="center"><strong>嵌套向量中断控制器</strong></td><td align="center">CAN</td><td align="center">CAN通信</td></tr><tr><td align="center"><strong>SysTick</strong></td><td align="center"><strong>系统滴答定时器</strong></td><td align="center">USB</td><td align="center">USB通信</td></tr><tr><td align="center">RCC</td><td align="center">复位和时钟控制</td><td align="center">RTC</td><td align="center">实时时钟</td></tr><tr><td align="center">GPIO</td><td align="center">通用IO口</td><td align="center">CRC</td><td align="center">CRC校验</td></tr><tr><td align="center">AFIO</td><td align="center">复用IO口</td><td align="center">PWR</td><td align="center">电源控制</td></tr><tr><td align="center">EXTI</td><td align="center">外部中断</td><td align="center">BKP</td><td align="center">备份寄存器</td></tr><tr><td align="center">TIM</td><td align="center">定时器</td><td align="center">IWDG</td><td align="center">独立看门狗</td></tr><tr><td align="center">ADC</td><td align="center">模数转换器</td><td align="center">WWDG</td><td align="center">窗口看门狗</td></tr><tr><td align="center">DMA</td><td align="center">直接内存访问</td><td align="center">DAC</td><td align="center">数模转换器</td></tr><tr><td align="center">USART</td><td align="center">同步&#x2F;异步串口通信</td><td align="center">SDIO</td><td align="center">SD卡接口</td></tr><tr><td align="center">I2C</td><td align="center">I2C通信</td><td align="center">FSMC</td><td align="center">可变静态存储控制器</td></tr><tr><td align="center">SPI</td><td align="center">SPI通信</td><td align="center">USB OTG</td><td align="center">USB主机接口</td></tr></tbody></table></li><li><p>命名规则</p><p><img src="https://shequ.stmicroelectronics.cn/data/attachment/forum/201709/16/151144mewf6r62wppxpefe.jpg"></p></li><li><p>系统结构</p><p><img src="https://raw.githubusercontent.com/flyingBridzz/flyingBridzz.github.io/master/_posts/image/STM32%E7%B3%BB%E7%BB%9F%E6%9E%84%E6%9E%B6/1.png"></p></li><li><p>引脚定义</p><p><img src="https://pic.imgdb.cn/item/67619080d0e0a243d4e589df.png"></p></li><li><p>启动配置</p><p><img src="https://pic.imgdb.cn/item/676128ecd0e0a243d4e5227a.png"></p></li><li><p>最小系统电路</p><p><img src="https://pic.imgdb.cn/item/67612c0cd0e0a243d4e528d2.png"></p></li></ol><h2 id="2-1-软件安装"><a href="#2-1-软件安装" class="headerlink" title="2-1 软件安装"></a>2-1 软件安装</h2><p><a href="https://www.bilibili.com/video/BV1th411z7sn?spm_id_from=333.788.videopod.episodes&vd_source=6c74875e4fc2627ae811a62db47bf683&p=3" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1th411z7sn?spm_id_from=333.788.videopod.episodes&amp;vd_source=6c74875e4fc2627ae811a62db47bf683&amp;p=3</a></p><h2 id="2-2-新建工程"><a href="#2-2-新建工程" class="headerlink" title="2-2 新建工程"></a>2-2 新建工程</h2><h3 id="操作寄存器构建STM32"><a href="#操作寄存器构建STM32" class="headerlink" title="操作寄存器构建STM32"></a>操作寄存器构建STM32</h3><ul><li><p>打开Keil5，点击Project中的New uVision Project，选择项目文件夹，给工程文件命名</p></li><li><p>选择芯片型号STM32F103C8T6，之后会弹出Keil软件新建功能小助手，叉掉</p></li><li><p>添加工程的必要文件</p><ul><li>找到启动文件：<code>固件库\STM32F10x_StdPeriph_Lib_V3.5.0\Libraries\CMSIS\CM3\DeviceSupport\ST\STM32F10x\startup\arm</code>下的所有启动文件<code>ctr+a</code>、<code>ctr+c</code></li><li>回到工程文件夹下，新建文件夹<code>Start</code>，将复制的内容粘贴到里面</li><li>回到固件库的<code>STM32F10x</code>的文件夹下，有<code>stm32f10x.h文件</code>（<strong>STM32的外设寄存器描述文件，用来描述STM32有哪些寄存器和它对应的地址的</strong>）、<code>system_stm32f10x.c</code>和<code>system_stm32f10x.h</code>文件（<strong>用来配置时钟的，STM32主频72MHz，就是system文件里的函数配置的</strong>），将这三个文件复制下来，也粘贴到Start文件夹下</li><li>STM32是内核和内核外围的设备组成的，但是内核的寄存器描述和外围设备的描述文件不是在一起的，还需要添加一个内核寄存器的描述文件。找到<code>\CM3\CoreSupport\</code>下的两个cm3（Cortex-M3)(core_cm3.c和core_cm3.h)，粘贴到Start文件夹下。</li></ul></li><li><p>回到Keil软件，将刚刚复制的那些文件添加到工程里来，创建一个Start文件夹，右击添加已经存在的文件，选择All files，添加一个启动文件（后缀名md.s)，所有的.c，.h文件，按住Ctr 进行选择，Add添加</p></li><li><p>在工程选项里添加上这个文件夹的头文件路径。点击魔术棒按键，打开工程选项，在<strong>C&#x2F;C++<strong>里找到</strong>Include Paths</strong>栏点击三个点的按钮，把Start的路径添加进来</p></li><li><p>打开工程文件夹创建User文件夹，该文件夹存放main函数。回到Keil软件右击Target增加组，改名为User，右击User添加新文件main.c，路径选择工程文件夹下的User。</p></li><li><p>在main.c文件里，右击添加<code>stm32f10x.h</code>，创建一个main.c，编译并建立工程。目前这是一个寄存器工程。</p><p>选择魔术棒找到Debug，使用<code>ST-Link Debugger</code>调试器，点击Setting，找到Flash Download，勾上Reset and Run(下载程序后会立马复位执行，不需要按Reset)</p><p>查看STM32F10xxx参考手册，找到RCC寄存器下的APB2外设时钟使能寄存器(<strong>RCC_APB2ENR</strong>)</p><pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"stm32f10x.h"</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    RCC<span class="token operator">-></span>APB2ENR <span class="token operator">=</span> <span class="token number">0x00000010</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 打开GPIOC的时钟了  </span>    GPIOC<span class="token operator">-></span>CRH <span class="token operator">=</span> <span class="token number">0x00300000</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 配置CNF13、MODE13   0011 推挽输出模式</span>    GPIOC<span class="token operator">-></span>ODR <span class="token operator">=</span> <span class="token number">0x00000000</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 低电平点亮  0x00002000  熄灭</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//最后一行要为空，否则会报警告</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="操作库函数构建STM32"><a href="#操作库函数构建STM32" class="headerlink" title="操作库函数构建STM32"></a>操作库函数构建STM32</h3><ul><li><p>在原有的工程文件夹下建立Library文件夹，打开固件库的文件夹，<code>STM32F10x_StdPeriph_Lib_V3.5.0\Libraries\STM32F10x_StdPeriph_Driver</code>下有库函数的源文件和头文件，其中misc.c是内核的库函数，将其复制到Library文件夹下。</p></li><li><p>在Keil下建立Library组，将库函数添加进去。还需要一些文件，打开固件库中的<code>\STM32F10x_StdPeriph_Lib_V3.5.0\Project\STM32F10x_StdPeriph_Template</code>下的<code>stm32f10x_conf.h</code>(<strong>用来配置库函数头文件的包含关系的、还有用来参数检查的函数定义</strong>)、<code>stm32f10x_it.c、stm32f10x_it.h</code>(<strong>中断处理</strong>)，将其复制到工程下的User目录下，在Keil软件的User组下进行添加。</p></li><li><p>还需要一个宏定义。打开<code>stm32f10x.h</code>文件，发现最后一段有这几条语句，只有定义了<strong>USE_STDPERIPH_DRIVER</strong>字符串，才能包含<strong>stm32f10x_conf.h</strong>这个文件。</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#ifdef USE_STDPERIPH_DRIVER</span>  <span class="token comment" spellcheck="true">#include "stm32f10x_conf.h"</span><span class="token comment" spellcheck="true">#endif</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>打开魔术棒，找到C&#x2F;C++，然后定义该字符串。在头文件路径下，还要增加User和Library目录的路径。</p></li><li><p>编译后没问题，开始编写main函数</p><pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"stm32f10x.h"</span>     </span><span class="token comment" spellcheck="true">// Device Header</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">RCC_APB2PeriphClockCmd</span><span class="token punctuation">(</span>RCC_APB2Periph_GPIOC<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 开启GPIOC的时钟</span>        GPIO_InitTypeDef GPIO_InitStructure<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 配置模式  端口  速度</span>    GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Mode <span class="token operator">=</span> GPIO_Mode_Out_PP<span class="token punctuation">;</span>    GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Pin <span class="token operator">=</span> GPIO_Pin_13<span class="token punctuation">;</span>    GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Speed <span class="token operator">=</span> GPIO_Speed_50MHz<span class="token punctuation">;</span>    <span class="token function">GPIO_Init</span><span class="token punctuation">(</span>GPIOC<span class="token punctuation">,</span> <span class="token operator">&amp;</span>GPIO_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">GPIO_SetBits</span><span class="token punctuation">(</span>GPIOC<span class="token punctuation">,</span> GPIO_Pin_13<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// 输出高电平</span>    <span class="token function">GPIO_ResetBits</span><span class="token punctuation">(</span>GPIOC<span class="token punctuation">,</span> GPIO_Pin_13<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 输出低电平</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><ol><li><p>启动类型选择</p><table><thead><tr><th align="left">缩写</th><th align="center">释义</th><th align="left">Flash容量</th><th>型号</th></tr></thead><tbody><tr><td align="left">LD_VL</td><td align="center">小容量产品超值系列</td><td align="left">16~32K</td><td>STM32F100</td></tr><tr><td align="left">MD_VL</td><td align="center">中容量产品超值系列</td><td align="left">64~128K</td><td>STM32F100</td></tr><tr><td align="left">HD_VL</td><td align="center">大容量产品超值系列</td><td align="left">256~512K</td><td>STM32F100</td></tr><tr><td align="left">LD</td><td align="center">小容量产品</td><td align="left">16~32K</td><td>STM32F101&#x2F;102&#x2F;103</td></tr><tr><td align="left">MD</td><td align="center">中容量产品</td><td align="left">64~128K</td><td>STM32F101&#x2F;102&#x2F;103</td></tr><tr><td align="left">HD</td><td align="center">大容量产品</td><td align="left">256~512K</td><td>STM32F101&#x2F;102&#x2F;103</td></tr><tr><td align="left">XL</td><td align="center">加大容量产品</td><td align="left">大于512K</td><td>STM32F101&#x2F;102&#x2F;103</td></tr><tr><td align="left">CL</td><td align="center">互联型产品</td><td align="left">-</td><td>STM32F105&#x2F;107</td></tr></tbody></table></li><li><p>新建工程步骤</p><ul><li>建立工程文件夹，Keil中新建工程，选择型号</li><li>工程文件夹里建立Start、Library、User等文件夹，复制固件库里面的文件到工程文件夹</li><li>工程里对应建立Start、Library、User等同名称的分组，然后将文件夹内的文件添加到工程分组里</li><li>工程选项，C&#x2F;C++，Include Paths内声明所有包含头文件的文件夹</li><li>工程选项，C&#x2F;C++，Define内定义USE_STDPERIPH_DRIVER</li><li>工程选项，Debug，下拉列表选择对应调试器，Settings，Flash Download里勾选Reset and Run</li></ul></li><li><p>工程架构</p><p><img src="https://pic.imgdb.cn/item/6761738ed0e0a243d4e5829d.png"></p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> STM32 </tag>
            
            <tag> 环境搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo的搭建过程</title>
      <link href="/2024/12/16/hexo-de-da-jian-guo-cheng/"/>
      <url>/2024/12/16/hexo-de-da-jian-guo-cheng/</url>
      
        <content type="html"><![CDATA[<h2 id="hexo博客的安装过程"><a href="#hexo博客的安装过程" class="headerlink" title="hexo博客的安装过程"></a>hexo博客的安装过程</h2><blockquote><p>使用ubuntu22 进行安装，然后关联github，选择主题Matery</p></blockquote><h3 id="安装Nodejs-和-Hexo-cli"><a href="#安装Nodejs-和-Hexo-cli" class="headerlink" title="安装Nodejs 和 Hexo-cli"></a>安装Nodejs 和 Hexo-cli</h3><p>1.卸载旧版本的 Node.js:</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> apt remove nodejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2.安装最新版本的Node.js(如v18 LTS)</p><pre class="line-numbers language-bash"><code class="language-bash">curl -fsSL https://deb.nodesource.com/setup_18.x <span class="token operator">|</span> <span class="token function">sudo</span> -E <span class="token function">bash</span> -<span class="token function">sudo</span> apt <span class="token function">install</span> -y nodejs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>3.验证安装版本</p><pre class="line-numbers language-bash"><code class="language-bash">node -v<span class="token function">npm</span> -v<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>4.安装Hexo-cli</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> -g hexo-clihexo -v     <span class="token comment" spellcheck="true">#查看安装是否成功</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="创建和运行Hexo博客"><a href="#创建和运行Hexo博客" class="headerlink" title="创建和运行Hexo博客"></a>创建和运行Hexo博客</h3><p>1.创建博客项目</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">mkdir</span> my-blog   <span class="token comment" spellcheck="true"># 创建博客目录</span><span class="token function">cd</span> my-blog      <span class="token comment" spellcheck="true"># 进入目录</span>hexo init       <span class="token comment" spellcheck="true"># 初始化 Hexo 博客</span><span class="token function">npm</span> <span class="token function">install</span>     <span class="token comment" spellcheck="true"># 安装依赖</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>2.启动本地服务器</p><pre class="line-numbers language-bash"><code class="language-bash">hexo server    <span class="token comment" spellcheck="true"># 本地运行</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>打开浏览器，访问：<code>http://localhost:4000</code></p></li><li><p>能看到Hexo默认的博客页面</p></li></ul><p>3.创建新文章</p><pre class="line-numbers language-bash"><code class="language-bash">hexo new <span class="token string">"我的第一篇文章"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>打开<code>source/_posts</code> 文件夹，找到新建的 .md 文件。</li><li>使用文本编辑器编辑文件，添加内容：<pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>    <span class="token key atrule">title</span><span class="token punctuation">:</span> 我的第一篇文章<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2024-12-16 12:00:00</span><span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Hexo<span class="token punctuation">,</span> 博客<span class="token punctuation">]</span><span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>这是我的第一篇 Hexo 博客文章！<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><p>4.生成静态文件</p><pre class="line-numbers language-bash"><code class="language-bash">hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>5.部署到 <strong>GitHub Pages</strong></p><ol><li><p>安装部署插件</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>配置<code>_config.yml</code>文件</p><pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span><span class="token key atrule">type</span><span class="token punctuation">:</span> git<span class="token key atrule">repo</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/你的用户名/你的仓库.git  <span class="token comment" spellcheck="true"># git@github.com:404djl/404djl.github.io.git </span><span class="token comment" spellcheck="true"># 仓库名一定是 用户名.github.io</span><span class="token key atrule">branch</span><span class="token punctuation">:</span> main     <span class="token comment" spellcheck="true"># 仓库的分支名</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>向github配置ssh密钥</p><p> 使用<code>ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;</code>命令生成SSH密钥对</p><p> 默认情况下，密钥会存储在~&#x2F;.ssh&#x2F;目录下，私钥文件名为id_rsa，公钥文件名为id_rsa.pub</p><p> 复制id_rsa.pub文件的内容，打开github，设置里的SSH，进行添加<br> <img src="https://pic.imgdb.cn/item/67603a72d0e0a243d4e4f8b7.png"></p></li><li><p>部署博客：</p><pre class="line-numbers language-bash"><code class="language-bash">hexo clean          <span class="token comment" spellcheck="true"># 清理缓存与静态文件</span>hexo generate       <span class="token comment" spellcheck="true"># 也可以 hexo g 生成静态文件</span>hexo deploy         <span class="token comment" spellcheck="true"># 也可以 hexo d 部署到远程仓库</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> blog </tag>
            
            <tag> Matery </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
